% Test the 'hook' code.
%\tracingassigns=1
%\tracinggroups=1
\def\pluginlist{ornaments}%
\input "paratext2.tex"
\input "ptx-ptxprint.tex"
\stylesheet{usfm.sty}
\stylesheet{ptx2pdf.sty}
\stylesheet{standardborders.sty}
\stylesheet{default-custom.sty}
\stylesheet{test.sty}
\stylesheet{cover.sty}
\input "usfmTex-settings.tex"
%\input "usfmTex-ext.tex"
%\input "hooks.tex"
%\tracingmacros=1
%\tracinggroups=1
%\tracingifs=1
%\tracing{A}
\tracing{m}
%\tracing{e}
%\tracing{eb}
%\tracing{ebi}
%\tracing{s}
%%\tracing{sa}
%\tracing{sc}
%\tracing{sh}
%\tracing{sk}
%\tracing{C}
%\tracing{F}
\tracing{T}
%\tracing{o}
\tracing{V}
\def\DebugBorderCat{footbox}
\tracing{g}
\CropMarkstrue
\showboxdepth=99
\showboxbreadth=99
%\def\doLines{\doGridLines\doGraphPaper}
%\tracing{P}
%\tracingoutput=1
% Set added material in desired form
\def\addmtlquteht{2pt}
\def\addmtlqutewd{1.5pt}
\def\addmtlqutelw{0.2pt}
\csname ColorFontstrue\endcsname
\lastptxfiletrue
\unbalancedfalse
%\tracingmacros=1
%\tracinggroups=1
%\KeepPeriph{intbible}
\def\dotrace{\tracinggroups=1\tracingmacros=1}
\NoStorePeriph{cover}
\tracingoutput=1
%\nonstopmode
\singlecolumn
\def\thelord{\nd The Lord\nd*}
\def\zitems#1 #2{→ #1 \bd #2\bd*}

\sethook{before}{q1}{\widdowpenalty=500 \clubpenalty=500}
\sethook{after}{q1}{\widdowpenalty=10000 \clubpenalty=500}

\sethook{before}{is1}{↓}
\sethook{after}{is1}{↑}
\sethook{start}{is1}{→}
\sethook{end}{is1}{←}

\ptxfile{cover.usfm}
\ptxfile{int.usfm}
%\tracingassigns=1
\addtrigger{bookstart}{TST}{\prepusfm\zgetperiph|intbible\* \unprepusfm}
\addtrigger{bookstart}{TST}{\prepusfm\zgetperiph|intnt\* \unprepusfm\vskip 10pt}\sethook{final}{afterpdfs}{\zNeedQuadPage}

\ptxfile{test.usfm}
\tracingstats=1
\bye
